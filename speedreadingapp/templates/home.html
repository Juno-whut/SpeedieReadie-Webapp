{% extends 'layout.html' %}

{% block title %}
    Welcome to Speed Reading App
{% endblock %}

{% block content %}
<h1>Welcome to Speed Reading App</h1> 
    <div class="container">
        <p>Paste the text you'd like to speed read here:</p>
        <textarea name="speedreadingbox" id="text-input" maxlength="500" placeholder="Enter your text here..."></textarea>
        <div id="char-count">0/500 characters</div>
        <form action="{% url 'home-speed-read' %}" method="post">
            {% csrf_token %}
            <input type="hidden" name="text" id="hidden-text">
            <button type="submit" onclick="setHiddenText()">Speed Read</button>
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        function updateCharCount() {
            const textBox = document.getElementById("text-input");
            const charCount = textBox.value.length;
            document.getElementById("char-count").innerText = `${charCount}/500 characters`;

            if (charCount > 500) {
                alert("Text exceeds 500 characters!");
                textBox.value = textBox.value.substring(0, 500);
                document.getElementById("char-count").innerText = `500/500 characters`;
            }
        }

        document.getElementById("text-input").addEventListener("input", updateCharCount);

        function setHiddenText() {
            document.getElementById('hidden-text').value = document.getElementById('text-input').value;
        }
    </script>
{% endblock %}
